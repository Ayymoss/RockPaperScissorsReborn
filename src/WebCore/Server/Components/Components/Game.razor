@using Radzen
@using RockPaperScissors.Core.Domain.Enums
@attribute [RenderModeInteractiveServer]

<RadzenCard>
    @if (!Player?.IsPlayerDataLoaded ?? true)
    {
        <RadzenText Text="Please enter a username before continuing..." class="rz-mb-0"/>
    }
    else
    {
        <RadzenStack Orientation="Orientation.Vertical" JustifyContent="JustifyContent.Center">
            <RadzenText Text="Rock Paper Scissors" TextStyle="TextStyle.DisplayH6" class="rz-mb-0"/>
            <RadzenText>CPU Move: @_computerGame?.Move.ToString()</RadzenText>
            <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Center">
                @if (!_gameEnded)
                {
                    @if (Player?.CurrentGame is null)
                    {
                        <RadzenButton Click="InitialiseGame" Text="Start" Icon="start" ButtonStyle="ButtonStyle.Success"/>
                    }
                    else
                    {
                        <RadzenButton Click="e => SubmitMove(e, RockPaperScissorsMove.Rock)" Text="Rock"
                                      Icon="public" ButtonStyle="ButtonStyle.Info"/>
                        <RadzenButton Click="e => SubmitMove(e, RockPaperScissorsMove.Paper)" Text="Paper"
                                      Icon="note" ButtonStyle="ButtonStyle.Info"/>
                        <RadzenButton Click="e => SubmitMove(e, RockPaperScissorsMove.Scissors)" Text="Scissors"
                                      Icon="content_cut" ButtonStyle="ButtonStyle.Info"/>
                    }
                }
                else
                {
                    <RadzenStack Orientation="Orientation.Vertical" JustifyContent="JustifyContent.Center" AlignItems="AlignItems.Center">
                        <RadzenText>You lost! Streak: @_finalStreak</RadzenText>
                        <RadzenButton Click="InitialiseGame" Text="Play Again" Icon="replay" ButtonStyle="ButtonStyle.Success"/>
                    </RadzenStack>
                }
            </RadzenStack>
        </RadzenStack>
    }
</RadzenCard>
