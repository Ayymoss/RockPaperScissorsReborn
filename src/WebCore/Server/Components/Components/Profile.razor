@using Radzen
@using Humanizer

<RadzenCard>
    <RadzenStack Orientation="Orientation.Vertical">
        <RadzenText Text="Player Info" TextStyle="TextStyle.DisplayH6" class="rz-mb-0"/>
        <RadzenStack Orientation="Orientation.Vertical">
            @if (Player?.IsPlayerDataLoaded ?? false)
            {
                <RadzenFieldset Text="Player Card">
                    <RadzenRow AlignItems="AlignItems.Center">
                        <RadzenColumn Size="6">
                            <RadzenLabel Text="Username"/>
                        </RadzenColumn>
                        <RadzenColumn Size="6">
                            <RadzenText Text="@Player.UserName" class="rz-mb-0"/>
                        </RadzenColumn>
                    </RadzenRow>
                    <RadzenRow AlignItems="AlignItems.Center">
                        <RadzenColumn Size="6">
                            <RadzenLabel Text="Chips"/>
                        </RadzenColumn>
                        <RadzenColumn Size="6">
                            <RadzenText Text="@Player.Chips.ToString()" class="rz-mb-0"/>
                        </RadzenColumn>
                    </RadzenRow>
                    <RadzenRow AlignItems="AlignItems.Center">
                        <RadzenColumn Size="6">
                            <RadzenLabel Text="Best Streak"/>
                        </RadzenColumn>
                        <RadzenColumn Size="6">
                            <RadzenText Text="@(Player.BestStreak?.ToString() ?? "--")" class="rz-mb-0"/>
                        </RadzenColumn>
                    </RadzenRow>
                    <RadzenRow AlignItems="AlignItems.Center">
                        <RadzenColumn Size="6">
                            <RadzenLabel Text="Placement"/>
                        </RadzenColumn>
                        <RadzenColumn Size="6">
                            <RadzenText Text="@(Player.Placement?.ToString() ?? "--")" class="rz-mb-0"/>
                        </RadzenColumn>
                    </RadzenRow>
                </RadzenFieldset>
                @if (Player?.CurrentGame is not null)
                {
                    <RadzenFieldset Text="Game Card">
                        <RadzenRow AlignItems="AlignItems.Center">
                            <RadzenColumn Size="6">
                                <RadzenLabel Text="Current Streak"/>
                            </RadzenColumn>
                            <RadzenColumn Size="6">
                                <RadzenText Text="@Player.CurrentGame.Streak.ToString()" class="rz-mb-0"/>
                            </RadzenColumn>
                        </RadzenRow>
                        <RadzenRow AlignItems="AlignItems.Center">
                            <RadzenColumn Size="6">
                                <RadzenLabel Text="Started"/>
                            </RadzenColumn>
                            <RadzenColumn Size="6">
                                <RadzenText Text="@Player.CurrentGame.GameStarted.Humanize()" class="rz-mb-0"/>
                            </RadzenColumn>
                        </RadzenRow>
                    </RadzenFieldset>
                }
            }
            else
            {
                <RadzenStack Orientation="Orientation.Vertical">
                    <RadzenFormField Text="Username">
                        <RadzenTextBox Change="@(UpdateUserName)"/>
                    </RadzenFormField>
                    @if (!string.IsNullOrWhiteSpace(_nameError))
                    {
                        <RadzenText Text="@_nameError" class="rz-mb-0"/>
                    }
                </RadzenStack>
            }
        </RadzenStack>
    </RadzenStack>
</RadzenCard>
